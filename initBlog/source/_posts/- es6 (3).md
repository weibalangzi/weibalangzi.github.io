---
title: ES6--解构赋值
tags:
- es6
---
## 数组解构赋值
es6允许使用以下方式对变量进行声明并赋值
```javaScript
let [theName,age,address] = ["hehe",18,"china"]
```
以上代码就是数组解构赋值，在es6中可以按照一定的模式从数组中提取值，然后给对应模式中的变量进行赋值，而这就是数组的解构赋值；

也可以嵌套多层进行赋值，只要两边模式一样就行；
```javaScript
let [theName,[age,gender],address] = ["hehe",[18,"boy"],"china"]
```
<!--more-->
如果解构赋值不成功，那么变量值为undefined
```javaScript
let [theName,age] = ["hehe"]
console.log(theName);//hehe
console.log(age);//undefined
```
也就是说等号左边的模式可不完全匹配右边的数组。

而如果等号右侧不是数组，那就得分以下两种情况：
1、如果是对象，那么判断是否具有[Iterator](https://weibalangzi.github.io/2017/12/04/TypeScript--%E9%AB%98%E7%BA%A7%E7%B1%BB%E5%9E%8B/)接口；
2、如果是值类型，那么首先转换为对象，然后再判断这个对象是否具有Iterator接口；
只要有一个机构具有Iterator接口都可以进行数组解构赋值；
```javaScript
let obj = {};
obj[Symbol.iterator] = function*() {
    yield 1;
    yield 2;
    yield 3;
};
let [a, b, c] = obj;
console.log(a);
console.log(b);
console.log(c);
```
解构赋值可以为模式中的变量指定默认值；
```javaScript
let [age = 18,theName,address] = [undefined,"hehe","china"]
```
如上，如果变量对应的值严格等于undefined，那么就使用默认值；
## 对象结构赋值
感觉和数组解构差不多，只不过在匹配的时候除了匹配模式还会匹配属性名；
```javaScript
let {name:theName,age:theAge,address:theAddress} = {name:"hehe",age:18,address:"china"}
```
就是这么简单，上面的代码还可以简化成下面这样：
```javaScript
let {name,age,address} = {name:"hehe",age:18,address:"china"}
```
还可以对其作出修改：
```javaScript
let {name,age,address} = {age:18,name:"hehe",address:"china"}
```
由此可知对象解构赋值对于顺序并没有要求，而如果没有找到同名属性，那么变量的值为undefined；
## 函数参数解构赋值
函数参数的解构赋值其实就是数组解构赋值和对象解构赋值在函数参数上的应用；
先举一个栗子；
```javaScript
function person([theName,age]){
    let str="";
    str=theName+age+"岁";
    return str
}
console.log(person(["hehe",18]))
```
再举一个栗子：
```javaScript
function person([theName,age]){
    let str="";
    str = theName+"age"+"岁"
}
console.log(person({theName:"hehe",age:18}))
```
如上两个栗子，函数的参数分别为数组和对象，于是在传参的时候进行结构赋值及ok了；
所以说所谓函数参数解构赋值，无非是把之前的数组和参数当成了函数中的参数；
## 展开运算符
展开运算符用三个点（...）表示，它可以展开一个数据结构，比如一个数组；
**具有Iterator接口的对象都可以使用展开运算符**
```javaScript
let arr = ["hehe",18,"china"];
console.log(...arr);//hehe 18 china
```
在数组解构中的运用：
```javaScript
let [theName,...detail] = ["hehe",18,"china","boy"]
console.log(detail);//[18, "china", "boy"]
```
如上，detail是由等号右侧剩余的数组元素构成的数组；
注意：展开运算符只能在函数参数或者数组文本中使用，不能像`let str=...arr`这样使用；

在es6之前，还可以使用Function.prototype.apply方法来将一个数组展开成多个参数；
```javaScript
function person(theName,age,address){
    return [theName,age,address]
}
var detail = ["hehe",18,"china"];
console.log(person.apply(null,detail);// ["hehe", 18, "china"]
```
现在可是直接使用展开运算符`person(...detail)`

也可以使用展开运算符实现数组合并效果：
```javaScript
var arr1 = [1,2,3];
var arr2 = [4,5,6];
arr1.push(...arr2)
console.log(arr1);//[1, 2, 3, 4, 5, 6]
```
可以将一个字符串转换成数组：
```javaScript
let str = "say hi";
console.log([...str]);//["s", "a", "y", " ", "h", "i"]
```
## 对象展开运算符
前面也介绍过，具有Iterator接口的对象可以使用展开运算符，es7中新增Object对象扩展运算符；
```javaScript
let obj = {theName,detail} = {theName:"hehe",age:18,gender:"boy"};
console.log(detail);//{age: 18, gender: "boy"}
```
此外，对象也可以使用展开运算符合并：
```javaScript
let obj1 = {
    name: "hehe",
    age: 18
}
let obj2 = {
    gender: "boy",
    hair: "black",
    ...obj1
}
console.log(obj2);//{gender: "boy", hair: "black", name: "hehe", age: 18}
```
